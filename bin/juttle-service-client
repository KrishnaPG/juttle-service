#!/usr/bin/env node

/* eslint no-console: 0 */
var _ = require('underscore');
var minimist = require('minimist');
var JuttleServiceClient = require('../lib/juttle-service-client');

var defaults = {
    'juttle-service': 'localhost:2000',
    'topic': 'default',
    'wait': false
};

var opts = minimist(process.argv.slice(2));

_.defaults(opts, defaults);

if (opts.help ||
    opts._.length !== 1) {
    JuttleServiceClient.usage();
}

opts.juttle_service = opts['juttle-service'];

var command = opts._[0];

JuttleServiceClient.handle_command(opts, command);
